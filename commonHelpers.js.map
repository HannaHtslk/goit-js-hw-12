{"version":3,"file":"commonHelpers.js","sources":["../src/img/bi_x-octagon.svg","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__3108d0c6__\"","import axios from \"axios\";\n\naxios.defaults.baseURL = 'https://pixabay.com';\n\nconst API_KEY = '43342767-c7e13188a4d46cb3021e40da1';\n\nexport const fetchPhotos = (q, photosPage) => {\n\n    const axiosParams = {\n        params: {\n            key: API_KEY,\n            q,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: 'true',\n            page: photosPage,\n            per_page: 15,\n        }\n        }\n\n    return axios.get('/api/', axiosParams);\n}\n","export  const renderPhotos = pictures => {\n      return pictures.map(picture =>\n          `\n <li class=\"gallery-item js-gallery-item\">\n  <a class=\"gallery-link\" href=\"${picture.largeImageURL}\">\n  <div class=\"image-wrapper\">\n    <img\n      class=\"gallery-image\"\n      src=\"${picture.webformatURL}\"\n      alt=\"${picture.tags}\"\n    />\n     </div>\n    </a>\n    <div class=\"content\">\n\n    <div class=\"detailed-info\">\n    <h3 class=\"title\">Likes</h3>\n       <p class=\"quantity\">${picture.likes}</p>\n         </div>\n\n         <div class=\"detailed-info\">\n       <h3 class=\"title\">Views</h3>\n       <p class=\"quantity\">${picture.views}</p>\n        </div>\n      \n        <div class=\"detailed-info\">\n       <h3 class=\"title\">Comments</h3>\n       <p class=\"quantity\">${picture.comments}</p>\n       </div>\n\n        <div class=\"detailed-info\">\n       <h3 class=\"title\">Downloads</h3>\n       <p class=\"quantity\">${picture.downloads}</p>\n       </div>\n\n    </div>\n</li> \n        `).join('');\n          \n   }","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport iconError from './img/bi_x-octagon.svg';\n\n\nimport { fetchPhotos } from './js/pixabay-api';\nimport { renderPhotos } from './js/render-functions';\n\n\nconst iziError = {\n  titleColor: 'rgba(255, 255, 255, 1)',\n  titleSize: '16px',\n  message: 'Sorry, there are no images matching your search query. Please try again!',\n  messageColor: 'rgba(255, 255, 255, 1)',\n  background: '#EF4040',\n  iconUrl: iconError,\n  position: 'topRight',\n    progressBarColor: 'rgba(181, 27, 27, 1)',\n    maxWidth: '432px',\n\n}\n\nconst iziInfo = {\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: 'topRight',\n}\n\n\n\nconst form = document.querySelector('.js-search-form');\nconst gallery = document.querySelector('.js-gallery');\nconst loader = document.querySelector('.js-loader');\nconst input = document.querySelector('.js-search-input');\nconst loadMoreBtn = document.querySelector('.js-load-more');\nlet searchQuery = null;\nlet currentPage = 1;\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: \"alt\",\n    captionDelay: 250,\n        }); \n\n\nconst resetLoadMore = () => {\n    loadMoreBtn.classList.add('is-hidden');\n    loadMoreBtn.removeEventListener('click', onLoadMoreClick);\n}\n\nconst onFormSubmit = async (event) => {\n    try {\n        event.preventDefault();\n        loadMoreBtn.classList.add('is-hidden');\n        \n        searchQuery = input.value.trim();\n        currentPage = 1;\n\n            if (searchQuery === '') {\n                iziToast.error(iziError);\n                gallery.innerHTML = '';\n                resetLoadMore();\n                event.target.reset();\n                return;\n            }\n           \n\n        gallery.innerHTML = '';\n\n        loader.classList.add('is-visible');\n\n        const { data } = await fetchPhotos(searchQuery, currentPage);\n      \n           \n\n        \n        loader.classList.remove('is-visible');\n\n\n        if (data.hits.length === 0) {\n            resetLoadMore();\n            gallery.innerHTML = '';\n            \n            event.target.reset();\n            \n            iziToast.error(iziError);\n            \n\n            return;\n            }\n            \n        const totalPages = Math.ceil(data.totalHits / data.per_page);\n        \n            if (totalPages === 1) {\n                resetLoadMore();\n                gallery.innerHTML = renderPhotos(data.hits);\n                event.target.reset();\n                return;\n            }\n        \n        gallery.innerHTML = renderPhotos(data.hits);\n\n\n        \n        \n        loadMoreBtn.classList.remove('is-hidden');\n        loadMoreBtn.addEventListener('click', onLoadMoreClick);\n\n        \n        lightbox.refresh();\n    } catch (error) {\n        \n        loader.classList.remove('is-visible');\n        console.log(error);\n    }\n\n    event.target.reset();\n}\n\nconst onLoadMoreClick = async (event) => {\n    try {\n        currentPage++;\n     \n\n        loader.classList.add('is-visible');\n   \n        const { data } = await fetchPhotos(searchQuery, currentPage);\n\n        \n        loader.classList.remove('is-visible');\n        gallery.insertAdjacentHTML('beforeend', renderPhotos(data.hits))\n\n\n        const galleryItem = document.querySelector('.js-gallery-item');\n        let rect = galleryItem.getBoundingClientRect();\n        // console.log(rect)\n        window.scrollBy({\n            top: rect.height * 2,\n            behavior: 'smooth',\n        });\n        // console.log(rect.height);\n   \n        const totalPages = Math.ceil(data.totalHits / data.per_page);\n            if (currentPage === totalPages) {\n                resetLoadMore();\n                iziToast.info(iziInfo);\n            }\n\n    } catch (error) {\n        console.log(error);\n    }\n    \n}\n\n\nform.addEventListener('submit', onFormSubmit);\n\n\n    "],"names":["iconError","axios","API_KEY","fetchPhotos","q","photosPage","axiosParams","renderPhotos","pictures","picture","iziError","iziInfo","form","gallery","loader","input","loadMoreBtn","searchQuery","currentPage","lightbox","SimpleLightbox","resetLoadMore","onLoadMoreClick","onFormSubmit","event","iziToast","data","error","rect","totalPages"],"mappings":"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"}